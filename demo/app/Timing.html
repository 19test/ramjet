<section>
	<h1>Timing is everything</h1>

	<p>You can use an easing function to make the transformation seem more natural. For convenience, <code>ramjet.linear</code> (the default), <code>ramjet.easeIn</code>, <code>ramjet.easeOut</code> and <code>ramjet.easeInOut</code> are included, but you can use any function that takes in input between 0 and 1 and returns a similar value, such as <a href='http://robertpenner.com/easing/'>Robert Penner's easing equations</a> (included here via Matt DesLauriers' <a href='https://www.npmjs.com/package/eases'>eases</a> package).</p>

	<p>In supported browsers, ramjet uses CSS animations to make the transformation buttery smooth, even on mobile. It precalculates keyframes so that you can use any timing function you like, not just the limited ones built in to CSS.</p>

	<button on-tap='start' disabled='{{transitioning}}'>start</button>

	<select value='{{easing}}'>
		{{#each eases}}
			<option value='{{this}}'>{{@key}}</option>
		{{/each}}
	</select>

	<label>
		<input type='range' value='{{duration}}' min='0' max='2000'>
		{{duration}}ms
	</label>

	<div class='a'><span>a</span></div>
	<div class='b hidden'><span>b</span></div>
</section>

<style>
	.a.hidden {
		background: white;
	}

	.b.hidden {
		background: white;
	}
</style>

<script>
	const ramjet = require( './ramjet' );
	const tap = require( 'ractive-events-tap' );
	const eases = require( 'eases' );

	component.exports = {
		data: () => ({
			eases,
			easing: eases.cubicOut,
			duration: 400
		}),

		onrender: function () {
			const a = this.find( '.a' );
			const b = this.find( '.b' );

			let reverse = false;

			this.on( 'start', () => {
				if ( this.get( 'transitioning' ) ) return;

				this.set( 'transitioning', true );

				const from = reverse ? b : a;
				const to = reverse ? a : b;

				from.classList.remove( 'hidden' );
				to.classList.remove( 'hidden' );

				ramjet.transform( from, to, {
					easing: this.get( 'easing' ),
					duration: this.get( 'duration' ),
					done: () => {
						this.set( 'transitioning', false );

						to.classList.remove( 'hidden' );
						reverse = !reverse;
					}
				});

				from.classList.add( 'hidden' );
				to.classList.add( 'hidden' );
			});
		},

		events: {
			tap
		}
	};
</script>